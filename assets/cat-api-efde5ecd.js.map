{"version":3,"file":"cat-api-efde5ecd.js","sources":["../../src/js/cat-api.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\naxios.defaults.headers['x-api-key'] =\n  'live_zVZLegicNQX58NrRr2a3UtQNLaAsu3u4YQWqDV3kak42qEhEeaTlUPvgEQMUxgbd';\nconst selectBreedRef = document.querySelector('#breeds');\nconst breedContainerRef = document.querySelector('.card');\nconst loaderRef = document.querySelector('.loader');\n\nasync function fetchBreeds() {\n  try {\n    const response = await axios.get('https://api.thecatapi.com/v1/breeds');\n    const result = response.data;\n    return result;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Bad operation',\n    });\n    breedContainerRef.innerHTML = `<h1 class=\"error-title\">Sorry, but server dosent work, reload page</h1>`;\n    breedContainerRef.classList.remove('hidden');\n    loaderRef.classList.add('hidden');\n  }\n}\n\nasync function fetchBreed(breed) {\n  try {\n    const response = await axios.get(\n      `https://api.thecatapi.com/v1/images/search?breed_ids=${breed}`\n    );\n    const result = response.data;\n    return result;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Illegal operation',\n    });\n    breedContainerRef.innerHTML = `<h1 class=\"error-title\">Sorry, but server dosent work, reload page</h1>`;\n    breedContainerRef.classList.remove('hidden');\n    loaderRef.classList.add('hidden');\n  }\n}\n\nconst options = [];\nconst data = fetchBreeds();\ndata.then(result => {\n  result.forEach(breed => {\n    const breedOption = document.createElement('option');\n    breedOption.value = breed.id;\n    breedOption.textContent = breed.name;\n    options.push(breedOption);\n  });\n  selectBreedRef.append(...options);\n\n  loaderRef.classList.add('hidden');\n  selectBreedRef.classList.remove('hidden');\n});\n\nselectBreedRef.addEventListener('change', e => {\n  breedContainerRef.innerHTML = `<div class=\"image-container\">\n  <span class=\"loader\"></span>\n  </div>\n  `;\n  breedContainerRef.classList.remove('hidden');\n  const breedDetails = fetchBreed(e.target.value);\n\n  breedDetails\n    .then(result => {\n      if (result == []) {\n        throw error;\n      }\n      breedContainerRef.innerHTML = `<div class=\"image-container\">\n            <img src=\"${result[0].url}\" alt=\"picture of ${result[0].breeds[0].name}\">\n        </div>\n        <h2 class=\"title\">${result[0].breeds[0].name}</h2>\n        <p class=\"description\">${result[0].breeds[0].description}</p>`;\n    })\n    .catch(error => {\n      iziToast.error({\n        title: 'Error',\n        message: 'Illegal operation',\n      });\n      breedContainerRef.innerHTML = `<h1 class=\"error-title\">Sorry, but server dosent work, reload page</h1>`;\n      breedContainerRef.classList.remove('hidden');\n      loaderRef.classList.add('hidden');\n    });\n});\n"],"names":["axios","selectBreedRef","breedContainerRef","loaderRef","fetchBreeds","iziToast","fetchBreed","breed","options","data","result","breedOption","e","error"],"mappings":"svBAIAA,EAAM,SAAS,QAAQ,WAAW,EAChC,wEACF,MAAMC,EAAiB,SAAS,cAAc,SAAS,EACjDC,EAAoB,SAAS,cAAc,OAAO,EAClDC,EAAY,SAAS,cAAc,SAAS,EAElD,eAAeC,GAAc,CAC3B,GAAI,CAGF,OAFiB,MAAMJ,EAAM,IAAI,qCAAqC,GAC9C,IAEzB,MAAe,CACdK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,eACf,CAAK,EACDH,EAAkB,UAAY,0EAC9BA,EAAkB,UAAU,OAAO,QAAQ,EAC3CC,EAAU,UAAU,IAAI,QAAQ,CACjC,CACH,CAEA,eAAeG,EAAWC,EAAO,CAC/B,GAAI,CAKF,OAJiB,MAAMP,EAAM,IAC3B,wDAAwDO,CAAK,EACnE,GAC4B,IAEzB,MAAe,CACdF,EAAS,MAAM,CACb,MAAO,QACP,QAAS,mBACf,CAAK,EACDH,EAAkB,UAAY,0EAC9BA,EAAkB,UAAU,OAAO,QAAQ,EAC3CC,EAAU,UAAU,IAAI,QAAQ,CACjC,CACH,CAEA,MAAMK,EAAU,CAAA,EACVC,EAAOL,EAAW,EACxBK,EAAK,KAAKC,GAAU,CAClBA,EAAO,QAAQH,GAAS,CACtB,MAAMI,EAAc,SAAS,cAAc,QAAQ,EACnDA,EAAY,MAAQJ,EAAM,GAC1BI,EAAY,YAAcJ,EAAM,KAChCC,EAAQ,KAAKG,CAAW,CAC5B,CAAG,EACDV,EAAe,OAAO,GAAGO,CAAO,EAEhCL,EAAU,UAAU,IAAI,QAAQ,EAChCF,EAAe,UAAU,OAAO,QAAQ,CAC1C,CAAC,EAEDA,EAAe,iBAAiB,SAAUW,GAAK,CAC7CV,EAAkB,UAAY;AAAA;AAAA;AAAA,IAI9BA,EAAkB,UAAU,OAAO,QAAQ,EACtBI,EAAWM,EAAE,OAAO,KAAK,EAG3C,KAAKF,GAAU,CACd,GAAIA,GAAU,CAAA,EACZ,MAAM,MAERR,EAAkB,UAAY;AAAA,wBACZQ,EAAO,CAAC,EAAE,GAAG,qBAAqBA,EAAO,CAAC,EAAE,OAAO,CAAC,EAAE,IAAI;AAAA;AAAA,4BAEtDA,EAAO,CAAC,EAAE,OAAO,CAAC,EAAE,IAAI;AAAA,iCACnBA,EAAO,CAAC,EAAE,OAAO,CAAC,EAAE,WAAW,MAChE,CAAK,EACA,MAAMG,GAAS,CACdR,EAAS,MAAM,CACb,MAAO,QACP,QAAS,mBACjB,CAAO,EACDH,EAAkB,UAAY,0EAC9BA,EAAkB,UAAU,OAAO,QAAQ,EAC3CC,EAAU,UAAU,IAAI,QAAQ,CACtC,CAAK,CACL,CAAC"}